<%- include('partials/head', { pageTitle: 'Session History' }) %>

<div class="page-header">
  <h1>Session History</h1>
  <a href="/" class="btn btn-outline">Back to Quest Board</a>
</div>

<% if (sessions.length === 0) { %>
  <div class="card">
    <div class="empty-state">
      <p>No completed sessions yet. Adventures await!</p>
    </div>
  </div>
<% } else { %>
  <div class="history-list">
    <% for (const s of sessions) { %>
      <div class="card history-card session-cat-<%= s.category %>">
        <div class="history-header">
          <% if (s.confirmed_date) { %>
            <div class="history-date"><%= formatDate(s.confirmed_date, { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' }) %></div>
          <% } %>
          <span class="session-category"><%= s.category === 'rpg' ? 'RPG' : 'D&D' %></span>
        </div>
        <h2><a href="/sessions/<%= s.id %>"><%= s.title %></a></h2>
        <p class="session-meta">DM: <%= s.dm_name %></p>
        <% if (s.summary) { %>
          <div class="history-summary"><%= s.summary %></div>
        <% } %>
      </div>
    <% } %>
  </div>
<% } %>

<%- include('partials/foot') %>
